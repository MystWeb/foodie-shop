<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.myst.web.mapper.ItemsCustomMapper">
    <select id="queryItemComments" resultType="cn.myst.web.pojo.vo.ItemCommentVO">
        SELECT ic.comment_level,
               ic.content,
               ic.sepc_name,
               ic.created_time,
               u.face AS user_face,
               u.nickname
        FROM items_comments AS ic
                     LEFT JOIN users AS u ON ic.user_id = u.id
                WHERE ic.item_id = #{paramsMap.itemId}
        <if test="paramsMap.level != null and paramsMap.level != ''">
            AND ic.comment_level = #{paramsMap.level}
        </if>
    </select>
</mapper>